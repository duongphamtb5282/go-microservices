# Environment Variables Setup

This guide explains how to use the `.env` file for the auth-service.

## Quick Start

1. **Load environment variables:**
   ```bash
   source ./load-env.sh
   ```

2. **Start the service:**
   ```bash
   ./auth-service
   ```

## Key Variables for Jaeger/Telemetry

The following variables are configured for Jaeger tracing:

```bash
# OpenTelemetry Configuration
OTEL_ENABLED=true
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318/v1/traces
OTEL_SERVICE_NAME=auth-service
OTEL_SERVICE_VERSION=1.0.0

# Alternative telemetry variables
TELEMETRY_ENABLED=true
TELEMETRY_SERVICE_NAME=auth-service
TELEMETRY_OTLP_ENDPOINT=http://localhost:4318/v1/traces
```

## Database Configuration

```bash
DATABASE_USERNAME=auth_user
DATABASE_PASSWORD=auth_password
DATABASE_NAME=auth_service
DATABASE_HOST=localhost
DATABASE_PORT=5432
```

## JWT Configuration

```bash
JWT_SECRET=dev-secret-key-change-in-production-must-be-at-least-32-characters-long
JWT_EXPIRATION=24h
AUTHORIZATION_MODE=jwt
```

## Testing with Jaeger

1. **Start Jaeger:**
   ```bash
   docker run -d --name jaeger \
     -p 16686:16686 \
     -p 4317:4317 \
     -p 4318:4318 \
     jaegertracing/all-in-one:latest \
     --collector.otlp.enabled=true
   ```

2. **Load environment and start service:**
   ```bash
   source ./load-env.sh
   ./auth-service
   ```

3. **Check Jaeger UI:**
   - Open: http://localhost:16686
   - Select "auth-service" from the service dropdown
   - Click "Find Traces"

## Troubleshooting

- **Service not appearing in Jaeger:** Make sure `OTEL_ENABLED=true` and OTLP endpoint is correct
- **Database connection issues:** Verify PostgreSQL is running and credentials are correct
- **Port conflicts:** Check if port 8085 is available

## Environment File Format

- Lines starting with `#` are comments
- Variables are in `KEY=VALUE` format
- No spaces around `=`
- Values containing spaces should be quoted (but avoid in this setup)
